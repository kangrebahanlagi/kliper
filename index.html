<!DOCTYPE html>
<html>
<head>
  <title>YouTube Clipper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex justify-center items-center min-h-screen">

<div class="bg-gray-800 p-6 rounded-xl w-full max-w-md">
  <h1 class="text-xl font-bold mb-4">ğŸ¬ YouTube Clipper</h1>

  <input id="url" class="w-full p-2 rounded bg-gray-700 mb-2" placeholder="YouTube URL">

  <button onclick="clip()" class="w-full bg-blue-600 p-2 rounded">
    Generate Clip
  </button>

  <div class="mt-4">
    <div class="w-full bg-gray-700 rounded h-3">
      <div id="bar" class="bg-green-500 h-3 rounded" style="width:0%"></div>
    </div>
    <p id="status" class="mt-2 text-sm"></p>
    <a id="download" class="block mt-2 text-blue-400"></a>
  </div>
</div>

<script>
const API = "https://drain-burner-prices-brake.trycloudflare.com"; // ğŸ”¥ GANTI dengan URL kamu

async function clip() {
  const url = document.getElementById("url").value;
  if (!url) {
    alert("Masukkan URL YouTube!");
    return;
  }

  document.getElementById("status").innerText = "â³ Mengirim request...";
  document.getElementById("bar").style.width = "5%";

  const res = await fetch(API + "/clip", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({url})
  });

  const data = await res.json();
  poll(data.job_id);
}

async function poll(id) {
  const timer = setInterval(async () => {
    const res = await fetch(API + "/progress/" + id);
    const data = await res.json();

    document.getElementById("bar").style.width = data.progress + "%";
    document.getElementById("status").innerText = "Progress: " + data.progress + "%";

    if (data.progress >= 100) {
      clearInterval(timer);

      const r = await fetch(API + "/result/" + id);
      const d = await r.json();

      document.getElementById("download").href = d.path;
      document.getElementById("download").innerText = "â¬‡ï¸ Download Video";
    }
  }, 2000);
}
</script>

</body>
</html>